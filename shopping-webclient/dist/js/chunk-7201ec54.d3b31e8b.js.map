{"version":3,"sources":["webpack:///./src/views/PasswordConfirmation.vue?d2db","webpack:///./src/views/PasswordConfirmation.vue","webpack:///src/views/PasswordConfirmation.vue","webpack:///./src/views/PasswordConfirmation.vue?489e","webpack:///./src/views/PasswordConfirmation.vue?bd7e"],"names":["render","_vm","this","_c","_self","staticClass","isReset","_v","attrs","passwordState","model","value","password","callback","$$v","expression","confirmPasswordState","confirmPassword","on","$event","resetPassword","usernameState","username","resetButtonClick","staticRenderFns","name","props","token","type","String","required","data","created","_created","_asyncToGenerator","regeneratorRuntime","mark","_callee","_yield$this$$axios","wrap","_context","prev","next","$axios","method","url","ProxyUrl","validateResetToken","sent","responseData","$notify","group","text","t0","stop","apply","arguments","methods","validEmail","email","re","test","_resetButtonClick","_callee2","_yield$this$$axios2","_context2","forgotPassword","httpStatus","_resetPassword","_callee3","_yield$this$$axios3","_context3","newPassword","$router","push","computed","length","component"],"mappings":"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","file":"js/chunk-7201ec54.d3b31e8b.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordConfirmation.vue?vue&type=style&index=0&id=06d460bf&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"confirmation-page\"},[_c('div',{staticClass:\"page\"},[_c('div',[(_vm.isReset)?_c('div',[_c('h2',[_vm._v(\"Enter a new password\")]),_c('b-form-group',[_c('b-form-input',{attrs:{\"id\":\"password\",\"type\":\"password\",\"name\":\"password\",\"state\":_vm.passwordState,\"placeholder\":\"Enter a password\",\"aria-describedby\":\"passwordFeedback\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('b-form-invalid-feedback',{attrs:{\"id\":\"passwordFeedback\"}},[_vm._v(\"Enter at least 7 characters.\")])],1),_c('b-form-group',[_c('b-form-input',{attrs:{\"id\":\"confirmPassword\",\"type\":\"password\",\"name\":\"confirmPassword\",\"state\":_vm.confirmPasswordState,\"placeholder\":\"Re-enter the password\",\"aria-describedby\":\"confirmPasswordFeedback\"},model:{value:(_vm.confirmPassword),callback:function ($$v) {_vm.confirmPassword=$$v},expression:\"confirmPassword\"}}),_c('b-form-invalid-feedback',{attrs:{\"id\":\"confirmPasswordFeedback\"}},[_vm._v(\"It should match the password entered.\")])],1),_c('b-button',{staticClass:\"primary-button\",on:{\"click\":function($event){return _vm.resetPassword()}}},[_vm._v(\"Reset Password\")])],1):_c('div',[_c('h2',[_vm._v(\"Re-enter your email for reset link\")]),_c('b-form-group',[_c('b-form-input',{attrs:{\"id\":\"username\",\"type\":\"email\",\"name\":\"username\",\"state\":_vm.usernameState,\"placeholder\":\"Enter Email\",\"aria-describedby\":\"usernameFeedback\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('b-form-invalid-feedback',{attrs:{\"id\":\"usernameFeedback\"}},[_vm._v(\"\\n            Enter a valid email address\\n          \")])],1),_c('b-button',{staticClass:\"primary-button\",on:{\"click\":function($event){return _vm.resetButtonClick()}}},[_vm._v(\"Resend Email\")])],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"confirmation-page\">\r\n    <div class=\"page\">\r\n      <div>\r\n        <div v-if=\"isReset\">\r\n          <h2>Enter a new password</h2>\r\n          <b-form-group>\r\n            <b-form-input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              :state=\"passwordState\"\r\n              v-model=\"password\"\r\n              placeholder=\"Enter a password\"\r\n              aria-describedby=\"passwordFeedback\"\r\n            ></b-form-input>\r\n            <b-form-invalid-feedback id=\"passwordFeedback\">Enter at least 7 characters.</b-form-invalid-feedback>\r\n          </b-form-group>\r\n\r\n          <b-form-group>\r\n            <b-form-input\r\n              id=\"confirmPassword\"\r\n              type=\"password\"\r\n              name=\"confirmPassword\"\r\n              :state=\"confirmPasswordState\"\r\n              v-model=\"confirmPassword\"\r\n              placeholder=\"Re-enter the password\"\r\n              aria-describedby=\"confirmPasswordFeedback\"\r\n            ></b-form-input>\r\n            <b-form-invalid-feedback\r\n              id=\"confirmPasswordFeedback\"\r\n            >It should match the password entered.</b-form-invalid-feedback>\r\n          </b-form-group>\r\n\r\n          <b-button @click=\"resetPassword()\" class=\"primary-button\">Reset Password</b-button>\r\n        </div>\r\n        <div v-else>\r\n          <h2>Re-enter your email for reset link</h2>\r\n          <b-form-group>\r\n            <b-form-input\r\n              id=\"username\"\r\n              type=\"email\"\r\n              name=\"username\"\r\n              :state=\"usernameState\"\r\n              v-model=\"username\"\r\n              placeholder=\"Enter Email\"\r\n              aria-describedby=\"usernameFeedback\"\r\n            ></b-form-input>\r\n            <b-form-invalid-feedback id=\"usernameFeedback\">\r\n              <!-- This will only be shown if the preceeding input has an invalid state -->\r\n              Enter a valid email address\r\n            </b-form-invalid-feedback>\r\n          </b-form-group>\r\n          <b-button @click=\"resetButtonClick()\" class=\"primary-button\">Resend Email</b-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProxyUrl from '@/constants/ProxyUrls';\r\n\r\nexport default {\r\n  name: 'PasswordConfirmation',\r\n  props: {\r\n    token: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      isReset: false,\r\n      password: '',\r\n      confirmPassword: '',\r\n      username: '',\r\n    };\r\n  },\r\n\r\n  async created() {\r\n    // When created, first confirm if the link is still valid.\r\n    try {\r\n      const { data } = await this.$axios({\r\n        method: 'get',\r\n        url: ProxyUrl.validateResetToken + this.token,\r\n      });\r\n\r\n      if (data && data.responseData) {\r\n        this.isReset = true;\r\n        this.$notify({\r\n          group: 'all',\r\n          type: 'success',\r\n          text: 'You can now change your password.',\r\n        });\r\n      } else {\r\n        this.$notify({\r\n          group: 'all',\r\n          type: 'warn',\r\n          text: 'Looks like you are a little too late. Please try resending the email.',\r\n        });\r\n      }\r\n    } catch (err) {\r\n      // console.log(\"Error \", err);\r\n      this.$notify({\r\n        group: 'all',\r\n        type: 'error',\r\n        text:\r\n          'There was an error fulfilling your request. Please try resending the reset information.',\r\n      });\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    validEmail(email) {\r\n      // eslint-disable-next-line\r\n      const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      return re.test(email);\r\n    },\r\n    async resetButtonClick() {\r\n      if (this.usernameState) {\r\n        try {\r\n          const { data } = await this.$axios({\r\n            method: 'get',\r\n            url: ProxyUrl.forgotPassword + this.username,\r\n          });\r\n          if (data && data.httpStatus) {\r\n            this.$notify({\r\n              group: 'all',\r\n              type: 'success',\r\n              text: 'The email was just sent. Please check your email and follow the instructions.',\r\n            });\r\n          }\r\n        } catch (err) {\r\n          this.$notify({\r\n            group: 'all',\r\n            type: 'error',\r\n            text: 'The email could not be sent right now. Please try again later',\r\n          });\r\n        }\r\n      }\r\n    },\r\n    async resetPassword() {\r\n      if (this.passwordState && this.confirmPasswordState) {\r\n        try {\r\n          const { data } = await this.$axios({\r\n            method: 'post',\r\n            url: ProxyUrl.resetPassword,\r\n            data: {\r\n              token: this.token,\r\n              newPassword: this.password,\r\n            },\r\n          });\r\n          if (data && data.httpStatus === 200 && data.responseData) {\r\n            this.$notify({\r\n              group: 'all',\r\n              type: 'success',\r\n              text: 'You can now go ahead and login.',\r\n            });\r\n            this.$router.push('/');\r\n          } else {\r\n            this.isReset = false;\r\n            this.password = '';\r\n            this.confirmPassword = '';\r\n\r\n            this.$notify({\r\n              group: 'all',\r\n              type: 'warn',\r\n              text: 'Looks like you are a little too late. Please try resending the email.',\r\n            });\r\n          }\r\n        } catch (err) {\r\n          this.$notify({\r\n            group: 'all',\r\n            type: 'error',\r\n            text:\r\n              'There was an error fulfilling your request. Please try resending the reset information.',\r\n          });\r\n        }\r\n      }\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    passwordState() {\r\n      if (this.password.length === 0) return null;\r\n      return this.password.length > 6;\r\n    },\r\n\r\n    confirmPasswordState() {\r\n      if (this.confirmPassword.length === 0) return null;\r\n      return this.confirmPassword === this.password;\r\n    },\r\n\r\n    usernameState() {\r\n      if (this.username.length === 0) return null;\r\n      return this.validEmail(this.username);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#passwordFeedback,\r\n#confirmPasswordFeedback,\r\n#usernameFeedback {\r\n  font-size: 12px;\r\n  text-align: left;\r\n}\r\n\r\nh2 {\r\n  margin-bottom: 50px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordConfirmation.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PasswordConfirmation.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PasswordConfirmation.vue?vue&type=template&id=06d460bf&scoped=true\"\nimport script from \"./PasswordConfirmation.vue?vue&type=script&lang=js\"\nexport * from \"./PasswordConfirmation.vue?vue&type=script&lang=js\"\nimport style0 from \"./PasswordConfirmation.vue?vue&type=style&index=0&id=06d460bf&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06d460bf\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}